# 계층별 장비

계층 별로 사용하는 장비가 다른데 대충 이름만 외워둬도 좋다. 간단하게 역할을 알아두면 배로 좋고....

## 1계층(물리 계층) - 리피터, 허브, 유선랜

### 리피터(Repeater)
긴 케이블일수록 신호가 약해지기 때문에 신호를 멀리 보내기 위한 **신호 세기 증폭 장치**이다. **지금은 다른 네트워크 장비에 기본적으로 리피터 기능이 탑재되어있어 사용하지 않는다.**

### 허브(Hub)
리피터 역할을 하며, 기존 리피터와 다르게 여러 장비를 연결할 수 있다. 특징으로는 **허브는 CSMA/CD 방식을 적용하고 있기 때문에 여러 장비에서 동시에 데이터를 전송하지 못한다.** 예를 들어 A가 데이터를 전송 중일 때 B도 데이터를 보내면 콜리전(충돌)이 일어나게 된다. 하나의 허브에 연결되어 있는 모든 장비들은 같은 콜리전 도메인(Collision Domain)안에 있기 때문에 사용하는 장비가 많아지면 콜리전 도메인의 크기는 커지고, **허브는 들어온 데이터를 모든 포트로 플러딩하기 때문에 콜리전이 자주 발생**한다.


## 2계층(데이터 링크 계층) - 브리지, 스위치

### 브리지(Bridge)
**네트워크 세그먼트를 서로 연결해 주는 장치**이다. 세그먼트라고 하면 경우에 따라서 의미가 다르다. 여기서 *세그먼트란 하나의 큰 네트워크를 구성하는 작은 네트워크들*을 세그먼트라고 표현한다. 그 세그먼트를 연결해주는 것이 브리지, 스위치 등 같은 장비들이 있다. 브리지는 5가지의 기능이 있다.

- Learning: 단어 그대로 학습한다는 뜻이다. A라는 호스트가 데이터를 보내면 A의 맥 어드레스를 브리지의 맥 어드레스 테이블에 저장해놓고, 다른 호스트에서 A라는 호스트에 데이터를 브리지는 맥 어드레스 테이블을 참고하여 전송 여부를 결정한다.
- Flooding: 목적지 정보가 맥 어드레스 테이블에 없다면 모든 포트로 똑같은 데이터를 전송한다.
- Forwarding: 목적지 정보가 맥 어드레스 테이블에 있다면 해당 포트로 데이터를 전송한다. 없으면 Flooding.
- Filtering: 브리지를 건너지 못하게 하는 기능이다. A와 B호스트가 같은 세그먼트, C와 D호스트가 또 다른 세그먼트라고 가정해보자. A호스트가 B호스트와 통신을 하려고 데이터를 보내면 브리지는 맥 어드레스 테이블에서 B호스트의 정보를 확인한다. A와 B호스트는 같은 세그먼트에 있으므로 브리지는 C,D호스트가 있는 세그먼트로 가는 다리를 차단한다. 이러한 기능때문에 허브와 다르게 콜리전 도메인을 나눌 수 있다.
- Aging: 어떠한 맥 주소를 테이블에 저장하면 계속 유지하는 것이 아니라, 300초가 지나도록 해당 맥 주소를 가진 프레임이 들어오지 않으면 테이블에서 자동으로 삭제된다.

### 스위치(Switch)
스위치는 브리지랑 비슷하게 네트워크 세그먼트를 연결해주지만 차이가 있다. 차이점은 처리방식이 *스위치는 하드웨어, 브리지는 소프트웨어 방식*이기 때문에 **속도는 스위치가 훨씬 빠르다.** 또한 **브리지에 비해 제공되는 포트 수도 많고, 포트 별로 속도를 지정할 수 있다. 여러모로 브리지의 상위 호환 장비이므로 브리지는 현재 사용되진 않는다.** 스위치를 계층별로 분류하면 다음과 같다.

- L2 스위치 - 가장 기본적인 스위치이다. 데이터 링크 계층에서 동작하며, 맥 주소를 기반으로 패킷을 전달한다. 다른 스위치에 비해 가격이 저렴하다는 장점이 있다.
- L3 스위치 - L2 스위치에 라우팅 기능이 추가된 장비로 IP 정보를 보고 스위칭한다. 기능적으로 보면 라우터랑 차이가 거의 없지만, 라우터는 소프트웨어 방식이라 속도면에서 하드웨어 방식인 L3 스위치가 훨씬 빠르고, 가격도 저렴하다. 그렇다면 라우터를 쓰는 이유가 없지 않냐고 할 수도 있는데, 제품에 따라 지원하는 기능이 다르기 때문에 용도에 맞게 사용하면 된다. 
- L4 스위치 - 4계층 프로토콜인 TCP/UDP를 이용하며, IP와 PORT 기반으로 스위칭을 한다. L4 스위치에서는 부하 부산(Load Balancing) 기능을 제공하는데, 많은 양의 트래픽을 여러 서버로 분산시켜주는 기능을 말한다.
- L7 스위치 - L4 스위치와 기능과 역할을 동일하나, L7 스위치에서는 추가로 페이로드를 분석하여 패킷을 처리한다. 페이로드를 분석함으로써 Dos나 SYN Attack 등 네트워크 공격에 대해 방어가 가능하고, 특정 바이러스 감염 패킷을 필터링할 수 있다. L7 스위치를 투입하면서 네트워크 보안 강화에 힘을 실어줄 순 있지만 가격이 비싸다는 단점이 있다.


## 3계층(네트워크 계층) - 라우터

### 라우터(Router)
라우터는 **네트워크간 데이터 전송을 위해 최적 경로(Route)를 설정하며, 이 경로를 따라 데이터를 전송하는 장비**를 말한다. 앞서 *L3 스위치에서 말했던 것처럼 기능은 비슷*하지만, **라우터는 가격이 비싸고 초기 설정이 복잡하다는 단점**이 있다. 라우터의 종류는 다음과 같다.

- 코어 라우터: 인터넷 서비스 제공자(ISP)의 랜이나 여러 개의 ISP 네트워크를 서로 연결한다.
- 센터 라우터: WAN 회선을 거쳐 회사의 본점과 회사의 지점을 서로 연결한다. 또, 인터넷 서비스 제공자와 기업의 네트워크와 연결할 때에도 쓰인다.
- 엣지 라우터: 지점, 영업소의 네트워크를 WAN 회선에 연결하여 회사의 본점의 라우터에 접근한다.원격 라우터: 랜과 WANG을 중계한다. WAN 라우터라고도 부른다.
- 브로드밴드 라우터 -가정이나 작은 규모의 기업에서 브로드밴드급의 인터넷에 접속할 때 쓰인다.
- 핫스팟 라우터: 휴대용 핫스팟에서 인터넷에 접속할 때 쓰인다.
- ISP 라우터: 인터넷을 제공하는 제공자에 의해 접속할 때 쓰이는 라우터이다.

## 4계층(전송 계층)-게이트웨이
**컴퓨터 네트워크에서 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 컴퓨터나 소프트웨어를 두루 일컫는 용어. 즉 다른 네트워크로 들어가는 입구 역할을 하는 네트워크 포인트이다.**

- 넓은 의미로는 **종류가 다른 네트워크 간의 통로**의 역할을 하는 장치이다. 또한 **게이트웨이를 지날 때마다 트래픽(traffic)도 증가하기 때문에 속도가 느려질 수 있다.** 쉽게 예를 들자면 해외여행을 들 수 있는데 해외로 나가기 위해서 꼭 통과해야 하는 공항이 게이트웨이와 같은 개념이다.
- 게이트웨이는 **서로 다른 네트워크상의 통신 프로토콜(protocol,통신규약)을 적절히 변환**해주는 역할을 한다.
- 게이트웨이는 하나 이상의 프로토콜을 사용하여 통신한다는 면에서 라우터, 스위치와는 구별되며 **OSI 참조 모델의 7계층 가운데 어느 곳에서도 동작이 가능**하므로 전송방식이 다른 통신망도 흡수함으로써 **서로 다른 기종끼리도 접속을 가능**하게 한다.

## 참고 자료
https://heisyoung.tistory.com/52