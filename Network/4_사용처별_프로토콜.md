# 프로토콜의 종류: 사용처별
일반 사용자가 쓸 수 있는 서비스에 쓰이는 프로토콜은 대부분 비슷한데 보통은 네트워크 간 자원 공유/송수신에 쓰이는 프로토콜들이다.

## 인터넷 접속 프로토콜 - TCP/IP(Transmission Control Protocol/Internet Protocol)
IP 주소 체계로 신뢰성 높은 데이터 송수신을 보장한다. 현재는 IPv4 주소체계를 이용하나 고질적인 주소 고갈 문제를 해결하기 위해 IPv6 주소체계로 확장중이다.

*DNS 서버 주소, IP 주소, 서브넷마스크, 게이트웨이 주소* 등을 통해 인터넷에 접근하려면 웹사이트와 사용자 모두 TCP/IP 프로토콜을 사용한다는 규약을 적용해야 한다.

### 1) IPv4
32bit 주소체계로 헤더가 2^4=16bit이다. CIDR 블록을 사용하며 서브넷 마스킹의 종류에 따라 클래스 A, B, C, D, E 다섯 가지로 나뉜다.
  - CIDR 블록(Classless Inter-Domain Routing Block)

    클래스 없는 도메인 간 라우팅 기법으로 **여러 네트워크 영역으로 나눌 때 쓰는 기법이다. IPv4의 효율적 사용을 위해 접두어를 이용한다.**

    보통 xxx.xxx.xxx.xxx/(서브넷 마스크의 개수)로 표현되며, **점으로 나뉘는 각 자리는 8bit씩 할당받아 총 32bit를 이룬다. 서브넷 마스크의 개수에 따라 클래스의 종류가 나뉜다.**

    더 자세한 설명은 [IPv4_vs_IPv6](5_IPv4_vs_IPv6.md)에서 확인할 수 있다.

### 2) IPv6
128bit 주소체계로 헤더가 2^6=64bit이다. IPv4보다 신뢰성/확장성에서 발전된 양상으로 모든 면에서 나은 성능을 보여준다.

**IPv4의 한계인 주소 공간의 고갈, 최소 지연과 자원의 예약 불가, 암호화와 인증 기능(보안) 미제공**을 해결하기 위해 표준화되었다. 일반적으로 16비트씩 단위가 나눠지며, 각 16비트 블록은 다시 4자리 16진수로 변환돼 콜론으로 구분된다.

---

## 웹 사이트 제공/제어 프로토콜 - HTTP(Hyper Text Transfer Protocol), HTTPS(HyperText Transfer Protocol Secure)
하이퍼 텍스트 프로그래밍 언어(HTML: HyperText Markup Language)를 제공, 제어하는 프로토콜이다. 보통 웹브라우저 주소창에 `http://~`를 입력하면 HTTP 프로토콜로 HTML로 만든 웹 페이지에 접속하겠다는 의미인데, 다른 프로토콜을 입력하면 다른 방식으로 해당 사이트에 접속한다.

http의 고질적인 문제인 보안 문제를 해결하기 위해 등장한게 **HTTPS 프로토콜**로 세션 계층에서 제공하는 SSL, TLS로 발급된 인증서(Certification)로 **웹 사이트, 사용자 모두 허가된 접속자가 맞는지 판단 후 연결시켜준다.** 보통 *로그인, 회원가입, 온라인 결제* 등에 쓰인다.

---

## 파일 송수신 프로토콜 - FTP(File Transfer Protocol)
파일 송수신만을 위해 최소한의 환경을 제공하는 프로토콜이다. HTTP도 파일 송수신이 가능하지만 많은 파일을 처리하기 적합하지 않으며, `ftp://~` 형식 주소로 접속이 가능하다. 즉, 슬래시 뒤에 오는 도메인 네임이 같아도 앞에 오는 프로토콜 이름이 다르다면 완전히 다른 서비스이다.

---

## 메일 송수신 프로토콜 - SMTP/POP3(Simple Mail Transfer Protocol/Post Office Protocol), IMAP(Internet Message Access Protocol)
메일을 보내는 건 SMTP 프로토콜, 메일을 받는 건 POP3, IMAP 프로토콜이다.

메일 서비스를 제공하는 웹 사이트마다 smtp, pop 서버가 존재하는데 이를 공개키로 설정하고 다른 메일 시스템에 붙여넣으면 B라는 메일 웹 서비스에서 A 메일 계정으로 받은 메일들을 확인하거나 A 메일 계정으로 메일을 보낼 수 있다.

- 예시 화면
![image](https://user-images.githubusercontent.com/31907528/168469873-99560d1f-5078-4abe-8b3a-0846dc22ddf4.png)

pop3 설정을 해서 gmail 서비스에서 naver 호스트의 메일을 확인할 수 있는 모습

### POP3와 IMAP의 차이점
POP3는 서버의 사서함으로부터 클라이언트 PC로 메일을 직접 다운로드 하는 형식이다. **처음부터 header, body를 모두 다운받으며 추가적 설정을 안 하면 다른 PC나 모바일 기기에서 동일한 이메일 확인이 불가능하다.**

IMAP는 메일 서버와 동기화해서 열람하는 방식으로, 처음에는 헤더의 제목 등과 같은 간단한 정보만 보여주지만 사용자가 메일을 '클릭'해서 확인하면 내용을 다운로드해서 POP3보다 빠른 편이다.
하지만 **메일을 확인할 떄마다 서버와 동기화하므로 통신 트래픽이 생기며 오프라인 확인 불가, 서버 용량에 따른 저장 공간 제한**이란 단점이 있다.

즉, **용량이 큰 메일을 자주 주고받아 주기적 용량 관리가 필요하고 오프라인 상태에서 메일 확인이 필요하다면 POP3**, **다양한 단말기에서 메일 확인, 불필요한 다운로드 없이 필요한 메일만 확인하는 경우라면 IMAP**가 좋다.

---

## 인터넷 주소 자동할당 프로토콜 - DHCP(Dynamic Hosting Configuration Protocol)
IP주소, 서브넷마스크, 게이트웨이 주소, DNS 서버 주소 등 인터넷 주소 세트를 자동으로 할당받아 설정하는 프로토콜. 개인 PC도 DHCP로 인터넷 주소를 자동으로 할당 받는다.

수많은 가입자마다 인터넷 주소를 개별 설정, 관리하기 어렵고 일반 사용자에게도 부담되기 때문에 *인터넷 공유기, 유선랜/무선랜, PC/스마트폰* 등 인터넷에 접속할 수 있는 기기면 자동 할당된다. 즉, 사용자가 원한다면 인터넷 주소를 직접 설정할 수도 있다!

## 주소 할당 과정
<img src = "https://it.donga.com/media/__sized__/images/2021/4/11/20f2c1b739b047d1-thumbnail-1920x1080-70.jpg">

---

## 참고 자료
https://it.donga.com/31842/

https://it.donga.com/31810/

https://www.nakjunizm.com/2020/01/29/Cidr/

https://xn--3e0bx5euxnjje69i70af08bea817g.xn--3e0b707e/jsp/resources/ipv6Info.jsp
